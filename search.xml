<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>Android ADB 常用命令</title>
      <link href="/2021/07/20/Android-ADB-%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/"/>
      <url>/2021/07/20/Android-ADB-%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/</url>
      
        <content type="html"><![CDATA[<h1 id="抓取系统log"><a href="#抓取系统log" class="headerlink" title="抓取系统log"></a>抓取系统log</h1><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">手机拨号界面输入： &#x27;*#*# 284 #*#*&#x27; #小米手机支持</span><br></pre></td></tr></table></figure><p>系统会自动提示：“正在生成bug报告，大概需要1分钟”,文件再sdcard下。包含bugreport内容</p><span id="more"></span><h2 id="错误报告获取"><a href="#错误报告获取" class="headerlink" title="错误报告获取"></a>错误报告获取</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">adb bugreport &lt;parh&gt;   #导出到指定路径</span><br></pre></td></tr></table></figure><p>导出后是一个zip文件，包含data/anr信息</p><h1 id="获取设备信息"><a href="#获取设备信息" class="headerlink" title="获取设备信息"></a>获取设备信息</h1><h2 id="查询手机发货地址"><a href="#查询手机发货地址" class="headerlink" title="查询手机发货地址"></a>查询手机发货地址</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">adb shell getprop ro.hw.country  #查询手机发货地址</span><br></pre></td></tr></table></figure><h2 id="查询CPU位数"><a href="#查询CPU位数" class="headerlink" title="查询CPU位数"></a>查询CPU位数</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">adb shell getprop ro.product.cpu.abi  #查询CPU是32位还是64位</span><br></pre></td></tr></table></figure><h2 id="查询EMUI版本"><a href="#查询EMUI版本" class="headerlink" title="查询EMUI版本"></a>查询EMUI版本</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">adb shell getprop ro.build.version.emui #查询EMUI版本</span><br></pre></td></tr></table></figure><h2 id="查询设备制造商"><a href="#查询设备制造商" class="headerlink" title="查询设备制造商"></a>查询设备制造商</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">adb shell getprop ro.product.manufacturer#查询设备制造商</span><br></pre></td></tr></table></figure><h2 id="查询手机品牌"><a href="#查询手机品牌" class="headerlink" title="查询手机品牌"></a>查询手机品牌</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">adb shell getprop ro.product.brand#查询手机品牌</span><br></pre></td></tr></table></figure><h2 id="查询手机内部代号"><a href="#查询手机内部代号" class="headerlink" title="查询手机内部代号"></a>查询手机内部代号</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">adb shell getprop ro.product.model#查询手机内部代号</span><br></pre></td></tr></table></figure><h2 id="查询设备名称"><a href="#查询设备名称" class="headerlink" title="查询设备名称"></a>查询设备名称</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">adb shell getprop ro.product.name#查询设备名称</span><br></pre></td></tr></table></figure><h2 id="查询设备序列号"><a href="#查询设备序列号" class="headerlink" title="查询设备序列号"></a>查询设备序列号</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">adb shell getprop ro.serialno#查询设备序列号</span><br></pre></td></tr></table></figure><h2 id="查询手机Android系统版本"><a href="#查询手机Android系统版本" class="headerlink" title="查询手机Android系统版本"></a>查询手机Android系统版本</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">adb shell getprop ro.build.version.release #查询手机Android系统版本</span><br></pre></td></tr></table></figure><h1 id="常用命令"><a href="#常用命令" class="headerlink" title="常用命令"></a>常用命令</h1><h2 id="显示当前栈顶Activity信息"><a href="#显示当前栈顶Activity信息" class="headerlink" title="显示当前栈顶Activity信息"></a>显示当前栈顶Activity信息</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">adb shell dumpsys activity top</span><br></pre></td></tr></table></figure><h2 id="显示当前Activity调用栈信息"><a href="#显示当前Activity调用栈信息" class="headerlink" title="显示当前Activity调用栈信息"></a>显示当前Activity调用栈信息</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">adb shell dumpsys activity activities</span><br></pre></td></tr></table></figure><h2 id="当前与用户交互的activity"><a href="#当前与用户交互的activity" class="headerlink" title="当前与用户交互的activity"></a>当前与用户交互的activity</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">方法一</span></span><br><span class="line">adb shell dumpsys activity activities | sed -En -e &#x27;/Running activities/,/Run #0/p&#x27;</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash">方法二</span></span><br><span class="line">adb shell dumpsys activity | grep -i run</span><br></pre></td></tr></table></figure><h2 id="显示已安装应用列表"><a href="#显示已安装应用列表" class="headerlink" title="显示已安装应用列表"></a>显示已安装应用列表</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">adb shell pm list package ｜ grep live</span><br></pre></td></tr></table></figure><h2 id="显示包详情信息"><a href="#显示包详情信息" class="headerlink" title="显示包详情信息"></a>显示包详情信息</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">adb shell dumpsys package &lt;packagename&gt;#adb shell dumpsys package com.brooks.live</span><br></pre></td></tr></table></figure><h2 id="显示app内部目录"><a href="#显示app内部目录" class="headerlink" title="显示app内部目录"></a>显示app内部目录</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">adb shell run-as &lt;package&gt; ls</span><br><span class="line"></span><br><span class="line">app_libs</span><br><span class="line">app_textures</span><br><span class="line">app_webview</span><br><span class="line">cache</span><br><span class="line">databases</span><br><span class="line">files</span><br><span class="line">lib</span><br><span class="line">lib-main</span><br><span class="line">shared_prefs</span><br></pre></td></tr></table></figure><h2 id="文件导入导出"><a href="#文件导入导出" class="headerlink" title="文件导入导出"></a>文件导入导出</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">adb push [path] [device path]   #导入</span><br><span class="line">adb pull [device path] [path]#导出</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> adb push ~/work/test.log  /sdcard</span> </span><br><span class="line"><span class="meta">#</span><span class="bash"> adb pull /sdcard/tracker.txt ~/work</span></span><br></pre></td></tr></table></figure><h2 id="Monkey-压力测试"><a href="#Monkey-压力测试" class="headerlink" title="Monkey 压力测试"></a>Monkey 压力测试</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">adb shell monkey -p &lt;packagename&gt; -s 200 --throttle 50 --monitor-native-crashes -v -v 5000</span><br><span class="line"></span><br><span class="line">adb shell monkey -p &lt;packagename&gt; -s 500 --ignore-crashes --ignore-timeouts --monitor-native-crashes -v -v 10000 &gt;  ./java_monkey_log.txt   </span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="生成签名"><a href="#生成签名" class="headerlink" title="生成签名"></a>生成签名</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> cmd：生成签名：</span></span><br><span class="line">keytool -genkey -alias android.keystore -keyalg RSA -validity 20000 -keystore android.keystore </span><br></pre></td></tr></table></figure><h2 id="标准hprof-conv文件转换"><a href="#标准hprof-conv文件转换" class="headerlink" title="标准hprof-conv文件转换"></a>标准hprof-conv文件转换</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">Android studio 转换 hprof-conv文件</span></span><br><span class="line">hprof-conv.exe com.brooks.car.hprof convert.hprof</span><br></pre></td></tr></table></figure><h2 id="设备总内存获取"><a href="#设备总内存获取" class="headerlink" title="设备总内存获取"></a>设备总内存获取</h2><p>内存不足时：会出现异常，卡顿、触发LMK杀死应用,【IO流 读取 /proc/meminfo文件信息 第一行就是】</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> cat proc/meminfo</span>      </span><br><span class="line">MemTotal:        1530888 kB</span><br><span class="line">MemFree:          292248 kB</span><br><span class="line">MemAvailable:     614972 kB</span><br><span class="line">Buffers:            4192 kB</span><br><span class="line">Cached:           368056 kB</span><br><span class="line">SwapCached:            0 kB</span><br><span class="line">Active:           885152 kB</span><br></pre></td></tr></table></figure><h2 id="获取App-进程内存信息"><a href="#获取App-进程内存信息" class="headerlink" title="获取App 进程内存信息"></a>获取App 进程内存信息</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">adb shell dumpsys meminfo &lt;pid&gt; #输出指定pid的某一进程</span><br><span class="line">adb shell dumpsys meminfo --package &lt;packagename&gt; #输出指定包名的进程，可能包含多个进程</span><br></pre></td></tr></table></figure><h1 id="adb-Logcat"><a href="#adb-Logcat" class="headerlink" title="adb Logcat"></a>adb Logcat</h1><h2 id="查看webview-log"><a href="#查看webview-log" class="headerlink" title="查看webview log"></a>查看webview log</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">adb logcat -s chromium</span><br></pre></td></tr></table></figure><h2 id="导出Log"><a href="#导出Log" class="headerlink" title="导出Log"></a>导出Log</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">adb logcat -s *:V &gt; ./live.log #全量log</span><br><span class="line">adb logcat -s *:E &gt; ./live.log #Error级别log</span><br><span class="line">adb logcat -s *:F &gt; ./live.log #Fatal级别log</span><br></pre></td></tr></table></figure><h2 id="过滤Log"><a href="#过滤Log" class="headerlink" title="过滤Log"></a>过滤Log</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">adb logcat | grep PK</span><br><span class="line">adb logcat | grep -i PK  #忽略大小写</span><br></pre></td></tr></table></figure><h2 id="adb无线调试"><a href="#adb无线调试" class="headerlink" title="adb无线调试"></a>adb无线调试</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash">adb connect &lt;手机ip&gt;:5555  <span class="comment">#只要手机不重启，后面就可以不用usb线连接手机了，直接通过网络adb就可以</span></span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash">如果重复以上步骤还是Offline的话，使用USB 线将设备与电脑连接。应确保连接成功（可运行 adb devices 看是否能列出该设备）。让设备在 5555 端口监听 TCP/IP 连接，PC端命令行输入：</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> adb tcpip 5555</span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash">断开连接</span></span><br><span class="line">adb disconnect &lt;手机ip&gt;:5555</span><br></pre></td></tr></table></figure><h1 id="adb-启动"><a href="#adb-启动" class="headerlink" title="adb 启动"></a>adb 启动</h1><h2 id="启动activity"><a href="#启动activity" class="headerlink" title="启动activity"></a>启动activity</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">adb shell am start -n ｛package｝/｛全类名activity&#125;</span><br><span class="line">adb shell am start -a  &#123; Action名称 &#125;  -d  &#123;参数&#125;</span><br></pre></td></tr></table></figure><h2 id="启动浏览器"><a href="#启动浏览器" class="headerlink" title="启动浏览器"></a>启动浏览器</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">adb shell am start -n com.android.browser/com.android.browser.BrowserActivity  #启动浏览器</span><br><span class="line">adb shell am start -a android.intent.action.VIEW -d http://www.baidu.com    #启动浏览器并打开指定网页</span><br></pre></td></tr></table></figure><h2 id="启动-Camera"><a href="#启动-Camera" class="headerlink" title="启动 Camera"></a>启动 Camera</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">adb shell am start -n com.android.camera/com.android.camera.Camera</span><br></pre></td></tr></table></figure><h2 id="拨打电话"><a href="#拨打电话" class="headerlink" title="拨打电话"></a>拨打电话</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">adb shell  am start -a  android.intent.action.CALL -d tel:10086</span><br></pre></td></tr></table></figure><h2 id="启动-google-map-直接定位到北京"><a href="#启动-google-map-直接定位到北京" class="headerlink" title="启动 google map 直接定位到北京"></a>启动 google map 直接定位到北京</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">adb shell am start -a android.intent.action.VIEW geo:0,0?q=beijing</span><br></pre></td></tr></table></figure><h2 id="启动activity通过scheme"><a href="#启动activity通过scheme" class="headerlink" title="启动activity通过scheme"></a>启动activity通过scheme</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">adb shell am start -d  autocat://findcar</span><br></pre></td></tr></table></figure><h2 id="关闭activity"><a href="#关闭activity" class="headerlink" title="关闭activity"></a>关闭activity</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">adb shell am force-stop ｛package｝</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 如：关闭浏览器</span></span><br><span class="line">adb shell am force-stop com.android.browser</span><br></pre></td></tr></table></figure><h2 id="启动service"><a href="#启动service" class="headerlink" title="启动service"></a>启动service</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">adb shell am startservice -n ｛包名｝/｛包名｝.&#123;服务名&#125;</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash">如：启动自己应用中一个service</span></span><br><span class="line">adb shell am startservice -n com.android.traffic/com.android.traffic.maniservice</span><br></pre></td></tr></table></figure><h2 id="卸载应用程序："><a href="#卸载应用程序：" class="headerlink" title="卸载应用程序："></a>卸载应用程序：</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">adb uninstall｛package｝</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash">如：卸载浏览器</span></span><br><span class="line">adb uninstall com.android.browser</span><br></pre></td></tr></table></figure><h2 id="发送broadcast："><a href="#发送broadcast：" class="headerlink" title="发送broadcast："></a>发送broadcast：</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">adb shell am broadcast -a &lt;广播动作&gt;</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash">如：发送一个网络变化的广播</span></span><br><span class="line">adb shell am broadcast -a android.net.conn.CONNECTIVITY_CHANGE</span><br></pre></td></tr></table></figure><h2 id="端口转发"><a href="#端口转发" class="headerlink" title="端口转发"></a>端口转发</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">adb shell am broadcast -a NotifyServiceStop</span><br><span class="line">adb forward tcp:12580 tcp:10086</span><br><span class="line">adb shell am broadcast -a NotifyServiceStart</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">echo 111 &gt; a.txt  （向 aa.txt写入 “111”） 只第一行用&quot;&gt;&quot; ，换行用&quot;&gt;&gt;&quot;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Android </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Android </tag>
            
            <tag> ADB </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Git 常用命令</title>
      <link href="/2021/07/18/Git-%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/"/>
      <url>/2021/07/18/Git-%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/</url>
      
        <content type="html"><![CDATA[<h1 id="配置"><a href="#配置" class="headerlink" title="配置"></a>配置</h1><h2 id="SSH"><a href="#SSH" class="headerlink" title="SSH"></a>SSH</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">一轮回车到底，在用户目录下 .ssh文件夹下</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> ssh-keygen -t rsa -C <span class="string">&quot;hyp.712@163.com&quot;</span></span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash">查看sh公钥</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> cat ~/.ssh/id_rsa.pub</span></span><br></pre></td></tr></table></figure><span id="more"></span> <h2 id="查看全部配置"><a href="#查看全部配置" class="headerlink" title="查看全部配置"></a>查看全部配置</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> git config -l</span></span><br><span class="line"></span><br><span class="line">user.name=brooks</span><br><span class="line">user.email=hyp.712@163.com</span><br><span class="line">color.ui=auto</span><br><span class="line">http.postbuffer=524288000</span><br><span class="line">core.repositoryformatversion=0</span><br><span class="line">core.filemode=true</span><br><span class="line">core.bare=false</span><br><span class="line">core.logallrefupdates=true</span><br><span class="line">remote.origin.url=git@xxx.git</span><br><span class="line">remote.origin.fetch=+refs/heads/*:refs/remotes/origin/*</span><br><span class="line">branch.master.remote=origin</span><br><span class="line">branch.master.merge=refs/heads/master</span><br></pre></td></tr></table></figure><h2 id="查看用户配置"><a href="#查看用户配置" class="headerlink" title="查看用户配置"></a>查看用户配置</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> git config --global --l</span></span><br><span class="line"></span><br><span class="line">user.name=brooks</span><br><span class="line">user.email=hyp.712@163.com</span><br><span class="line">color.ui=auto</span><br><span class="line">http.postbuffer=524288000</span><br></pre></td></tr></table></figure><h2 id="修改用户配置"><a href="#修改用户配置" class="headerlink" title="修改用户配置"></a>修改用户配置</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash">  git config --global user.name <span class="string">&quot;输入你的用户名&quot;</span></span></span><br><span class="line"><span class="meta">$</span><span class="bash">  git config --global user.email <span class="string">&quot;输入你的邮箱&quot;</span></span></span><br></pre></td></tr></table></figure><h1 id="仓库"><a href="#仓库" class="headerlink" title="仓库"></a>仓库</h1><h2 id="初始化仓库"><a href="#初始化仓库" class="headerlink" title="初始化仓库"></a>初始化仓库</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">mkdir demo</span><br><span class="line">cd demo</span><br><span class="line"></span><br><span class="line">git init</span><br><span class="line">touch README.md</span><br><span class="line">git add README.md</span><br><span class="line">git commit -m &quot;first commit&quot;</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash">添加仓库地址</span></span><br><span class="line">git remote add xxx.git #项目地址</span><br><span class="line">git push -u origin master</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash">已有仓库</span></span><br><span class="line">cd existing_git_repo</span><br><span class="line">git remote add origin xxx.git #项目地址</span><br><span class="line">git push -u origin master</span><br></pre></td></tr></table></figure><h2 id="查看远程仓库地址"><a href="#查看远程仓库地址" class="headerlink" title="查看远程仓库地址"></a>查看远程仓库地址</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> git remote -v</span></span><br></pre></td></tr></table></figure><h2 id="添加新的远程仓库"><a href="#添加新的远程仓库" class="headerlink" title="添加新的远程仓库"></a>添加新的远程仓库</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> git remote add &lt;remote&gt; &lt;url&gt;</span></span><br></pre></td></tr></table></figure><h2 id="修改远程仓库地址"><a href="#修改远程仓库地址" class="headerlink" title="修改远程仓库地址"></a>修改远程仓库地址</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">方法一：直接修改</span></span><br><span class="line">git remote set-url origin [url]</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash">方法二：先删除再修改地址</span></span><br><span class="line">git remote rm origin</span><br><span class="line">git remote add origin [url]</span><br></pre></td></tr></table></figure><h2 id="显示远程仓库信息"><a href="#显示远程仓库信息" class="headerlink" title="显示远程仓库信息"></a>显示远程仓库信息</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> git remote show &lt;remote&gt;</span></span><br></pre></td></tr></table></figure><h2 id="关联本地和远程仓库"><a href="#关联本地和远程仓库" class="headerlink" title="关联本地和远程仓库"></a>关联本地和远程仓库</h2><p>fatal: refusing to merge unrelated histories</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">解决方案：</span></span><br><span class="line">git pull origin master --allow-unrelated-histories</span><br></pre></td></tr></table></figure><h1 id="分支"><a href="#分支" class="headerlink" title="分支"></a>分支</h1><h2 id="查看本地分支"><a href="#查看本地分支" class="headerlink" title="查看本地分支"></a>查看本地分支</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> git branch</span></span><br><span class="line">* master</span><br></pre></td></tr></table></figure><p>master 分支前的 * 字符，它表示当前所在的分支。</p><h2 id="查看远程分支"><a href="#查看远程分支" class="headerlink" title="查看远程分支"></a>查看远程分支</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> git branch -r</span></span><br></pre></td></tr></table></figure><h2 id="列出所有分支（local-amp-remote）"><a href="#列出所有分支（local-amp-remote）" class="headerlink" title="列出所有分支（local&amp;remote）"></a>列出所有分支（local&amp;remote）</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> git branch -a</span></span><br></pre></td></tr></table></figure><h2 id="切换分支"><a href="#切换分支" class="headerlink" title="切换分支"></a>切换分支</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> git checkout &lt;branch&gt;</span></span><br></pre></td></tr></table></figure><h2 id="创建并切换到新分支"><a href="#创建并切换到新分支" class="headerlink" title="创建并切换到新分支"></a>创建并切换到新分支</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> git checkout -b &lt;branch&gt;</span></span><br></pre></td></tr></table></figure><h2 id="基于当前分支创建新分支"><a href="#基于当前分支创建新分支" class="headerlink" title="基于当前分支创建新分支"></a>基于当前分支创建新分支</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> git branch &lt;new-branch&gt;</span></span><br></pre></td></tr></table></figure><h2 id="删除本地分支"><a href="#删除本地分支" class="headerlink" title="删除本地分支"></a>删除本地分支</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> git branch -d &lt;branch&gt;</span></span><br></pre></td></tr></table></figure><h2 id="删除远程分支"><a href="#删除远程分支" class="headerlink" title="删除远程分支"></a>删除远程分支</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> git push -d origin &lt;branch&gt;</span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">$</span><span class="bash"> git push -d origin &lt;branch1&gt; &lt;branch2&gt; &lt;branch3&gt; <span class="comment">#删除多个分支</span></span></span><br></pre></td></tr></table></figure><h2 id="修改本地分支名称"><a href="#修改本地分支名称" class="headerlink" title="修改本地分支名称"></a>修改本地分支名称</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> git branch -m &lt;old-branch&gt; &lt;new-branch&gt;</span> </span><br></pre></td></tr></table></figure><h2 id="修改远程分支名称"><a href="#修改远程分支名称" class="headerlink" title="修改远程分支名称"></a>修改远程分支名称</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">不能直接修改，步骤：</span></span><br><span class="line">1、修改本地分支</span><br><span class="line">2、删除远程分支</span><br><span class="line">3、将新分支推上去</span><br><span class="line">4、将新本地分支和远程相连</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">$</span><span class="bash"> git branch -m &lt;old-branch&gt; &lt;new-branch&gt;</span> </span><br><span class="line"><span class="meta">$</span><span class="bash"> git push -d origin &lt;old-branch&gt;</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> git push origin &lt;new-branch&gt;</span> </span><br><span class="line"><span class="meta">$</span><span class="bash"> git push --set-upstream origin &lt;new-branch&gt;</span> </span><br></pre></td></tr></table></figure><h1 id="操作"><a href="#操作" class="headerlink" title="操作"></a>操作</h1><h2 id="查看仓库文件状态"><a href="#查看仓库文件状态" class="headerlink" title="查看仓库文件状态"></a>查看仓库文件状态</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> git status</span></span><br></pre></td></tr></table></figure><h2 id="查看未暂存文件变化"><a href="#查看未暂存文件变化" class="headerlink" title="查看未暂存文件变化"></a>查看未暂存文件变化</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> git diff     <span class="comment">#查看未暂存 所有文件的变更</span></span></span><br><span class="line"><span class="meta">$</span><span class="bash"> git diff &lt;path&gt;  <span class="comment">#查看未暂存 指定文件的变更</span></span></span><br></pre></td></tr></table></figure><h2 id="查看已暂存文件变化"><a href="#查看已暂存文件变化" class="headerlink" title="查看已暂存文件变化"></a>查看已暂存文件变化</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> git diff --cached   <span class="comment">#查看已暂存 所有文件的变更</span></span></span><br><span class="line"><span class="meta">$</span><span class="bash"> git diff --cached &lt;path&gt;  <span class="comment">#查看已暂存 指定文件的变更</span></span></span><br></pre></td></tr></table></figure><h2 id="添加暂存"><a href="#添加暂存" class="headerlink" title="添加暂存"></a>添加暂存</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> git add .   <span class="comment">#暂存所有 修改的文件</span></span></span><br><span class="line"><span class="meta">$</span><span class="bash"> git add &lt;path&gt;  <span class="comment">#暂存指定 修改的文件</span></span></span><br></pre></td></tr></table></figure><h2 id="添加部分暂存"><a href="#添加部分暂存" class="headerlink" title="添加部分暂存"></a>添加部分暂存</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">git add -p （git add --patch）命令，交互式暂存此文件的特定部分</span><br><span class="line"></span><br><span class="line">这时有很多选项。 输入 ? 显示所有可以使用的命令列表：</span><br><span class="line">Stage this hunk [y,n,a,d,/,j,J,g,e,?]? ?</span><br><span class="line">y - stage this hunk</span><br><span class="line">n - do not stage this hunk</span><br><span class="line">a - stage this and all the remaining hunks in the file</span><br><span class="line">d - do not stage this hunk nor any of the remaining hunks in the file</span><br><span class="line">g - select a hunk to go to</span><br><span class="line">/ - search for a hunk matching the given regex</span><br><span class="line">j - leave this hunk undecided, see next undecided hunk</span><br><span class="line">J - leave this hunk undecided, see next hunk</span><br><span class="line">k - leave this hunk undecided, see previous undecided hunk</span><br><span class="line">K - leave this hunk undecided, see previous hunk</span><br><span class="line">s - split the current hunk into smaller hunks</span><br></pre></td></tr></table></figure><p>通常，输入<code>y</code>暂存此部分，或者输入<code>n</code>跳过此部分就可以了</p><h2 id="取消暂存"><a href="#取消暂存" class="headerlink" title="取消暂存"></a>取消暂存</h2><p>把对某个文件的修改添加到下次提交中</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> git restore --staged .   <span class="comment">#取消暂存 所有文件</span></span></span><br><span class="line"><span class="meta">$</span><span class="bash"> git restore --staged &lt;path&gt; <span class="comment">#取消暂存 指定文件</span></span></span><br></pre></td></tr></table></figure><h2 id="丢弃改动"><a href="#丢弃改动" class="headerlink" title="丢弃改动"></a>丢弃改动</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> git restore &lt;path&gt; <span class="comment">#丢弃文件的改动</span></span></span><br></pre></td></tr></table></figure><h2 id="删除未跟踪文件"><a href="#删除未跟踪文件" class="headerlink" title="删除未跟踪文件"></a>删除未跟踪文件</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> git clean -f  <span class="comment"># 删除 untracked files</span></span></span><br><span class="line"><span class="meta">$</span><span class="bash"> git clean -fd  <span class="comment"># 连 untracked 的目录也一起删掉</span></span></span><br><span class="line"><span class="meta">$</span><span class="bash"> git clean -nfd <span class="comment"># -n 参数来先看看会删掉哪些文件，防止重要文件被误删</span></span></span><br></pre></td></tr></table></figure><h2 id="提交"><a href="#提交" class="headerlink" title="提交"></a>提交</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> git commit -m <span class="string">&#x27;message here&#x27;</span>   <span class="comment">#用于提交暂存区的文件</span></span></span><br><span class="line"><span class="meta">$</span><span class="bash"> git commit -a -m <span class="string">&#x27;message here&#x27;</span> <span class="comment">#用于提交跟踪过的文件,相当于省去了 git add</span></span></span><br></pre></td></tr></table></figure><h2 id="修改上次提交msg"><a href="#修改上次提交msg" class="headerlink" title="修改上次提交msg"></a>修改上次提交msg</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> git commit --amend <span class="comment"># 首先使用命令后，会进入到vim 编辑器,修改注释信息，然后退出。</span></span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">$</span><span class="bash"> git commit --amend -m [message]    <span class="comment"># 如果代码没有任何新变化，则用来改写上一次commit的提交信息</span></span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">$</span><span class="bash"> git commit --amend [file1] [file2] <span class="comment"># 重做上一次commit，并包括指定文件的新变化</span></span></span><br></pre></td></tr></table></figure><p>git commit –amend 就是解决一些很小的改动，使得你不想在重现创建一个commit而设定。如果你的commit已经push到了远程仓库，那么使用–amend修改commit后，git push时一定要使用 <strong>–force-with-lease</strong> 参数。否则就会报错:</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">error: 无法推送一些引用到 &#x27;https://github.com/×××/test.git&#x27;</span><br><span class="line">提示：更新被拒绝，因为您当前分支的最新提交落后于其对应的远程分支。</span><br><span class="line">提示：再次推送前，先与远程变更合并（如 &#x27;git pull ...&#x27;）。详见</span><br><span class="line">提示：&#x27;git push --help&#x27; 中的 &#x27;Note about fast-forwards&#x27; 小节。</span><br></pre></td></tr></table></figure><h2 id="更新"><a href="#更新" class="headerlink" title="更新"></a>更新</h2><p>下载远程仓库代码，但不合并到HEAD中：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> git fetch &lt;remote&gt;</span></span><br></pre></td></tr></table></figure><p>将远程仓库代码合并到本地版本中：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> git pull origin master</span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">$</span><span class="bash"> git pull  <span class="comment">#相当于 git fetch + git merge</span></span>  </span><br></pre></td></tr></table></figure><p>强制拉取并覆盖本地代码</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git fetch --all</span><br><span class="line">git reset --hard origin/master</span><br></pre></td></tr></table></figure><h2 id="合并"><a href="#合并" class="headerlink" title="合并"></a>合并</h2><p>将分支合并到当前HEAD中：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> git merge &lt;branch&gt;   <span class="comment"># 把 目标&lt;branch&gt;分支代码 合并到当前分支*</span></span> </span><br></pre></td></tr></table></figure><p>将当前HEAD版本rebase到分支中:</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> git rebase &lt;branch&gt;  <span class="comment"># 把当前分支* 代码合并到 &lt;branch&gt; 目标分支上.</span></span>  </span><br></pre></td></tr></table></figure><p><img src="/2021/07/18/Git-%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/img_rebase.png"></p><p>退出rebase:</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> git rebase --abort</span></span><br></pre></td></tr></table></figure><p>解决冲突后继续rebase：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> git rebase --<span class="built_in">continue</span></span></span><br></pre></td></tr></table></figure><p>在编辑器中手动解决冲突后，标记文件为已解决冲突</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> git add &lt;resolved-file&gt;</span></span><br></pre></td></tr></table></figure><h2 id="摘选"><a href="#摘选" class="headerlink" title="摘选"></a>摘选</h2><p>当你只需要部分代码变动（某几个提交）转移到另一个分支时，采用 Cherry pick(俗称：摘樱桃)。</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> git cherry-pick &lt;commitHash&gt;</span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash">步骤</span></span><br><span class="line">1.先从原分支查看git log获取待合并的 commitHash</span><br><span class="line">2.然后checkout到目标分支</span><br><span class="line">3.执行git cherry-pick commitHash，即可</span><br><span class="line"></span><br><span class="line">git cherry-pick命令的常用配置项如下。</span><br><span class="line">（1）-e，--edit  打开外部编辑器，编辑提交信息。</span><br><span class="line">（2）-n，--no-commit  只更新工作区和暂存区，不产生新的提交。</span><br><span class="line">（3）-x  在提交信息的末尾追加一行(cherry picked from commit ...)，方便以后查到这个提交是如何产生的。</span><br><span class="line">（4）-s，--signoff 在提交信息的末尾追加一行操作者的签名，表示是谁进行了这个操作。</span><br></pre></td></tr></table></figure><h2 id="撤销"><a href="#撤销" class="headerlink" title="撤销"></a>撤销</h2><p>放弃工作目录下的所有修改：</p><p>1.如果是撤销所有的已经add的文件:</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> git reset HEAD    <span class="comment">#等同于 git restore --staged .</span></span></span><br></pre></td></tr></table></figure><p>2.如果是撤销某个文件或文件夹：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> git reset HEAD &lt;path&gt;   <span class="comment">#等同于 git restore --staged &lt;path&gt;</span></span> </span><br></pre></td></tr></table></figure><p>3.回退到上次提交</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> git reset --hard HEAD^</span></span><br></pre></td></tr></table></figure><p>4.回退到上上次提交</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> git reset --hard HEAD^^</span></span><br></pre></td></tr></table></figure><p>5.重置一个提交（通过创建一个截然不同的新提交）</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> git revert &lt;commit&gt;</span></span><br></pre></td></tr></table></figure><p>6.将HEAD重置到指定的版本，并抛弃该版本之后的所有修改：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> git reset --hard &lt;commit&gt;</span></span><br></pre></td></tr></table></figure><h2 id="发布"><a href="#发布" class="headerlink" title="发布"></a>发布</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> git push</span>  </span><br><span class="line"><span class="meta">$</span><span class="bash"> git push &lt;origin&gt; &lt;branch&gt; <span class="comment">#如果添加多个仓库，指定仓库名称</span></span></span><br><span class="line"><span class="meta">$</span><span class="bash"> git push origin develop  <span class="comment">#举例，提交远程origin仓库的develop分支</span></span></span><br></pre></td></tr></table></figure><h2 id="查看提交历史"><a href="#查看提交历史" class="headerlink" title="查看提交历史"></a>查看提交历史</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> git <span class="built_in">log</span>   <span class="comment">#查看所有历史</span></span></span><br><span class="line"><span class="meta">$</span><span class="bash"> git <span class="built_in">log</span> --author=<span class="string">&quot;username&quot;</span>  <span class="comment">#查看某个用户所有提交历史</span></span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">$</span><span class="bash"> git <span class="built_in">log</span> --oneline -[n] <span class="comment">#查看历史，单行显示提交历史，不展示详情 -5 最近五条</span></span></span><br><span class="line"><span class="meta">$</span><span class="bash"> git <span class="built_in">log</span> -p &lt;path&gt;   <span class="comment">#查看指定文件的提交历史</span></span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">$</span><span class="bash"> git reflog <span class="comment"># 显示当前分支的最近几次提交</span></span></span><br></pre></td></tr></table></figure><h2 id="查看提交的内容"><a href="#查看提交的内容" class="headerlink" title="查看提交的内容"></a>查看提交的内容</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> git show <span class="comment">#查看最近的一此提交内容</span></span></span><br><span class="line"><span class="meta">$</span><span class="bash"> git show commitid <span class="comment">#查看指定的提交内容,，配合 git log --oneline 拿到commitid</span></span></span><br></pre></td></tr></table></figure><h2 id="回滚到某次commit"><a href="#回滚到某次commit" class="headerlink" title="回滚到某次commit"></a>回滚到某次commit</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">回退命令：</span><br><span class="line"><span class="meta">$</span><span class="bash"> git reset --hard HEAD^         <span class="comment">#回退到上个版本</span></span></span><br><span class="line"><span class="meta">$</span><span class="bash"> git reset --hard HEAD~3        <span class="comment">#回退到前3次提交之前，以此类推，回退到n次提交之前</span></span></span><br><span class="line"><span class="meta">$</span><span class="bash"> git reset --hard commit_id     <span class="comment">#退到/进到 指定commit的sha码</span></span></span><br><span class="line"></span><br><span class="line">强推到远程：</span><br><span class="line"><span class="meta">$</span><span class="bash"> git push origin HEAD --force</span></span><br></pre></td></tr></table></figure><h1 id="存储"><a href="#存储" class="headerlink" title="存储"></a>存储</h1><h2 id="执行存储"><a href="#执行存储" class="headerlink" title="执行存储"></a>执行存储</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> git stash save <span class="string">&quot;save message&quot;</span></span></span><br></pre></td></tr></table></figure><p>执行存储时，添加备注，方便查找，只有git stash 也要可以的，但查找时不方便识别。</p><h2 id="查看存储列表"><a href="#查看存储列表" class="headerlink" title="查看存储列表"></a>查看存储列表</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> git stash list</span></span><br></pre></td></tr></table></figure><h2 id="显示存储改动的文件"><a href="#显示存储改动的文件" class="headerlink" title="显示存储改动的文件"></a>显示存储改动的文件</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> git stash show</span></span><br></pre></td></tr></table></figure><p>默认show第一个存储,如果要显示其他存贮，后面加stash@{$num}，比如第二个 git stash show stash@{1}</p><h2 id="显示存储改动的内容"><a href="#显示存储改动的内容" class="headerlink" title="显示存储改动的内容"></a>显示存储改动的内容</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> git stash show -p  <span class="comment">#显示第一个存储的改动，</span></span></span><br></pre></td></tr></table></figure><p>默认show第一个如果显示其他存存储，命令后面加 stash@{$num} -p ，比如第二个：git stash show stash@{1} -p</p><h2 id="应用某个存储"><a href="#应用某个存储" class="headerlink" title="应用某个存储"></a>应用某个存储</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> git stash apply</span></span><br></pre></td></tr></table></figure><p>应用存储，但不会从存储列表中删除，默认使用第一个,即stash@{0}，如果要使用其他追加 stash@{$num} ， 比如第二个：git stash apply stash@{1} </p><h2 id="应用存储且删除记录"><a href="#应用存储且删除记录" class="headerlink" title="应用存储且删除记录"></a>应用存储且删除记录</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> git stash pop</span></span><br></pre></td></tr></table></figure><p>应用存储，并从存储列表中删除，默认为第一个stash,即stash@{0}，如果要应用并删除其他stash，命令：git stash pop stash@{$num} ，比如应用并删除第二个：git stash pop stash@{1}</p><h2 id="丢弃存储"><a href="#丢弃存储" class="headerlink" title="丢弃存储"></a>丢弃存储</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> git stash drop stash@&#123;num]</span></span><br></pre></td></tr></table></figure><p>丢弃stash@{$num}存储，从列表中删除这个存储</p><h2 id="删除所有stash"><a href="#删除所有stash" class="headerlink" title="删除所有stash"></a>删除所有stash</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> git stash clear</span></span><br></pre></td></tr></table></figure><h1 id="标签"><a href="#标签" class="headerlink" title="标签"></a>标签</h1><h2 id="显示Tag列表"><a href="#显示Tag列表" class="headerlink" title="显示Tag列表"></a>显示Tag列表</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> git tag</span></span><br></pre></td></tr></table></figure><h2 id="显示标签信息"><a href="#显示标签信息" class="headerlink" title="显示标签信息"></a>显示标签信息</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> git show v2.9_tag</span></span><br><span class="line"></span><br><span class="line">tag v2.9_tag</span><br><span class="line">Tagger: brooks &lt;hyp712@163.com&gt;</span><br><span class="line">Date:   Mon Jul 19 21:06:45 2021 +0800</span><br><span class="line">v2.9美颜</span><br></pre></td></tr></table></figure><p>输出显示了打标签者的信息、打标签的日期时间、附注信息，然后显示具体的提交信息。</p><h2 id="添加Tag"><a href="#添加Tag" class="headerlink" title="添加Tag"></a>添加Tag</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> git tag &lt;tagname&gt;</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> git tag &lt;tagname&gt; -m <span class="string">&quot;messsage&quot;</span></span> </span><br></pre></td></tr></table></figure><h2 id="删除Tag"><a href="#删除Tag" class="headerlink" title="删除Tag"></a>删除Tag</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> git tag -d &lt;tagname&gt; <span class="comment">#删除本地标签</span></span></span><br><span class="line"><span class="meta">$</span><span class="bash"> git push origin --delete &lt;tagname&gt;   <span class="comment">#删除远程标签</span></span></span><br></pre></td></tr></table></figure><h2 id="发布标签"><a href="#发布标签" class="headerlink" title="发布标签:"></a>发布标签:</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> git push origin v1.0  <span class="comment">#将v1.0tag推送到远程仓库</span></span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">$</span><span class="bash"> git push origin --tags <span class="comment">#将把所有不在远程仓库的标签全部推上去</span></span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Git </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Git </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>使用Nexus搭建Maven本地私服</title>
      <link href="/2021/07/17/%E4%BD%BF%E7%94%A8Nexus%E6%90%AD%E5%BB%BAMaven%E6%9C%AC%E5%9C%B0%E7%A7%81%E6%9C%8D/"/>
      <url>/2021/07/17/%E4%BD%BF%E7%94%A8Nexus%E6%90%AD%E5%BB%BAMaven%E6%9C%AC%E5%9C%B0%E7%A7%81%E6%9C%8D/</url>
      
        <content type="html"><![CDATA[<h1 id="概述"><a href="#概述" class="headerlink" title="概述"></a>概述</h1><ol><li>公司业务-核心或基础模块-独立研发，提供aar对其他业务线支持</li><li>在工作中可能存在有些开发机器不能上网</li><li>大量的机器获取jar包会导致公司网络很慢</li><li>有时候公司会自己发布自己的项目版本，其他的项目可能会依赖引用到</li><li>等…..</li></ol><p>综上等原因，我们需要用到Maven本地仓库对项目进行管理。</p><h1 id="介绍"><a href="#介绍" class="headerlink" title="介绍"></a>介绍</h1><p>Nexus是Maven的仓库管理器，用来搭建一个本地仓库服务器，这样做的好处便于管理，节约网络资源， 速度快，可以通过SNAPSHOT版本控制，开进行模块间的高效依赖开发。</p><span id="more"></span><h1 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h1><h2 id="下载"><a href="#下载" class="headerlink" title="下载"></a>下载</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wget https://download.sonatype.com/nexus/3/nexus-3.31.1-01-unix.tar.gz</span><br></pre></td></tr></table></figure><p>也可以在这里-选择 <a href="https://help.sonatype.com/repomanager3/download/download-archives---repository-manager-3">历史版本</a></p><h2 id="解压"><a href="#解压" class="headerlink" title="解压"></a>解压</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tar -zxvf nexus-3.31.1-01-unix.tar.gz</span><br></pre></td></tr></table></figure><h2 id="启动服务"><a href="#启动服务" class="headerlink" title="启动服务"></a>启动服务</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">cd nexus-3.31.1-01/bin</span><br><span class="line"></span><br><span class="line">./nexus start</span><br></pre></td></tr></table></figure><h2 id="停止服务"><a href="#停止服务" class="headerlink" title="停止服务"></a>停止服务</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./nexus stop</span><br></pre></td></tr></table></figure><h2 id="访问用户界面"><a href="#访问用户界面" class="headerlink" title="访问用户界面"></a>访问用户界面</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">http://localhost:8081/</span><br><span class="line"></span><br><span class="line">用户名：admin</span><br><span class="line">密 码： 初始密码可以sonatype-work里找到,使用cat命令获取</span><br><span class="line">cat ./sonatype-work/nexus3/admin.password</span><br><span class="line">c28197d3-0673-4399-b634-effa06b8450a   #初始密码</span><br></pre></td></tr></table></figure><h2 id="登录成功"><a href="#登录成功" class="headerlink" title="登录成功"></a>登录成功</h2><p><img src="/2021/07/17/%E4%BD%BF%E7%94%A8Nexus%E6%90%AD%E5%BB%BAMaven%E6%9C%AC%E5%9C%B0%E7%A7%81%E6%9C%8D/Screen+Shot+2017-09-13+at+3.14.25+PM.png"></p><h1 id="创建用户"><a href="#创建用户" class="headerlink" title="创建用户"></a>创建用户</h1><p>创建brooks用户，成功后使用brooks登录。</p><p><img src="/2021/07/17/%E4%BD%BF%E7%94%A8Nexus%E6%90%AD%E5%BB%BAMaven%E6%9C%AC%E5%9C%B0%E7%A7%81%E6%9C%8D/image-20210715233429927.png" alt="image-20210715233429927"></p><h1 id="创建仓库"><a href="#创建仓库" class="headerlink" title="创建仓库"></a>创建仓库</h1><h2 id="设置页面点击-Create-repository"><a href="#设置页面点击-Create-repository" class="headerlink" title="设置页面点击 Create repository"></a>设置页面点击 Create repository</h2><p><img src="/2021/07/17/%E4%BD%BF%E7%94%A8Nexus%E6%90%AD%E5%BB%BAMaven%E6%9C%AC%E5%9C%B0%E7%A7%81%E6%9C%8D/image-20210715233751831.png" alt="image-20210715233751831"></p><h2 id="选择maven2-hosted"><a href="#选择maven2-hosted" class="headerlink" title="选择maven2 hosted"></a>选择maven2 hosted</h2><p><img src="/2021/07/17/%E4%BD%BF%E7%94%A8Nexus%E6%90%AD%E5%BB%BAMaven%E6%9C%AC%E5%9C%B0%E7%A7%81%E6%9C%8D/image-20210715234019281.png" alt="image-20210715234019281"></p><p><img src="/2021/07/17/%E4%BD%BF%E7%94%A8Nexus%E6%90%AD%E5%BB%BAMaven%E6%9C%AC%E5%9C%B0%E7%A7%81%E6%9C%8D/image-20210715234402305.png" alt="image-20210715234402305"></p><p>点击Create repository开始创建。</p><h2 id="查看创建的仓库"><a href="#查看创建的仓库" class="headerlink" title="查看创建的仓库"></a>查看创建的仓库</h2><p><img src="/2021/07/17/%E4%BD%BF%E7%94%A8Nexus%E6%90%AD%E5%BB%BAMaven%E6%9C%AC%E5%9C%B0%E7%A7%81%E6%9C%8D/image-20210715234740899.png" alt="image-20210715234740899"></p><h1 id="上传aar到仓库"><a href="#上传aar到仓库" class="headerlink" title="上传aar到仓库"></a>上传aar到仓库</h1><h2 id="打开Project的build-gradle文件"><a href="#打开Project的build-gradle文件" class="headerlink" title="打开Project的build.gradle文件"></a>打开Project的build.gradle文件</h2><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">allprojects &#123;</span><br><span class="line">    repositories &#123;</span><br><span class="line">        ...</span><br><span class="line">        mavenLocal() <span class="comment">//添加这一行，告诉AS，我们使用自己的仓库</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="打开module的build-gradle文件"><a href="#打开module的build-gradle文件" class="headerlink" title="打开module的build.gradle文件"></a>打开module的build.gradle文件</h2><p>添加以下配置：</p><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 添加插件，上传到本地 maven 仓库</span></span><br><span class="line">apply <span class="attr">plugin:</span> <span class="string">&#x27;maven&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//定义上传行为</span></span><br><span class="line">uploadArchives &#123;</span><br><span class="line">    repositories.mavenDeployer &#123;</span><br><span class="line">        repository(<span class="attr">url:</span> <span class="string">&#x27;http://localhost:8081/repository/com.wali.livelib/&#x27;</span>)&#123; <span class="comment">//url,从仓库详情里获取</span></span><br><span class="line">            authentication(<span class="attr">userName:</span><span class="string">&#x27;brooks&#x27;</span>,<span class="attr">password:</span><span class="string">&#x27;brooks&#x27;</span>)  <span class="comment">//用户名密码，可以配置到文件里</span></span><br><span class="line">        &#125;</span><br><span class="line">        pom.groupId = <span class="string">&#x27;com.brooks.live&#x27;</span> <span class="comment">//组名</span></span><br><span class="line">        pom.artifactId = <span class="string">&#x27;network&#x27;</span>     <span class="comment">//项目id</span></span><br><span class="line">        pom.version = <span class="string">&#x27;1.0.0&#x27;</span>    <span class="comment">//版本</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="编译aar并上传"><a href="#编译aar并上传" class="headerlink" title="编译aar并上传"></a>编译aar并上传</h2><p><img src="/2021/07/17/%E4%BD%BF%E7%94%A8Nexus%E6%90%AD%E5%BB%BAMaven%E6%9C%AC%E5%9C%B0%E7%A7%81%E6%9C%8D/image-20210716000749534.png" alt="image-20210716000749534"></p><h2 id="上传成功"><a href="#上传成功" class="headerlink" title="上传成功"></a>上传成功</h2><p><img src="/2021/07/17/%E4%BD%BF%E7%94%A8Nexus%E6%90%AD%E5%BB%BAMaven%E6%9C%AC%E5%9C%B0%E7%A7%81%E6%9C%8D/image-20210716001240233.png" alt="image-20210716001240233"></p><h1 id="项目引用aar"><a href="#项目引用aar" class="headerlink" title="项目引用aar"></a>项目引用aar</h1><p>在App的build.gradle文件下添加：</p><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">allprojects &#123;</span><br><span class="line">    repositories &#123;</span><br><span class="line">     maven &#123; url <span class="string">&quot;http://localhost:8081/repository/com.wali.livelib/&quot;</span> &#125; <span class="comment">//添加仓库url地址</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>在dependencies下添加依赖：</p><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dependencies &#123;...implementation <span class="string">&#x27;com.brooks.live:network:1.0.0&#x27;</span>&#125;</span><br></pre></td></tr></table></figure><p>点击同步，完成！</p><p><strong>感谢：</strong></p><p><a href="https://help.sonatype.com/repomanager3/installation/installation-methods">https://help.sonatype.com/repomanager3/installation/installation-methods</a></p>]]></content>
      
      
      <categories>
          
          <category> Nexus </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Android </tag>
            
            <tag> Nexus </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Android AOSP（二）源码编译</title>
      <link href="/2021/07/16/Android-AOSP%EF%BC%88%E4%BA%8C%EF%BC%89%E6%BA%90%E7%A0%81%E7%BC%96%E8%AF%91/"/>
      <url>/2021/07/16/Android-AOSP%EF%BC%88%E4%BA%8C%EF%BC%89%E6%BA%90%E7%A0%81%E7%BC%96%E8%AF%91/</url>
      
        <content type="html"><![CDATA[<h1 id="整编"><a href="#整编" class="headerlink" title="整编"></a>整编</h1><p>整编，就是编译整个 Android 源码，最终 out 目录会生成几个重要的镜像文件，其中有 system.img、userdata.img、ramdisk.img 等，这些是可以刷机的。</p><h2 id="准备编译环境"><a href="#准备编译环境" class="headerlink" title="准备编译环境"></a><strong>准备编译环境</strong></h2><span id="more"></span><p><strong>1.安装 openjdk</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get update</span><br><span class="line">sudo apt-get install openjdk-8-jdk</span><br></pre></td></tr></table></figure><p><strong>2.安装以下依赖包：</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install git-core gnupg flex bison gperf build-essential zip curl zlib1g-dev gcc-multilib g++-multilib libc6-dev-i386 lib32ncurses5-dev x11proto-core-dev libx11-dev lib32z-dev ccache libgl1-mesa-dev libxml2-utils xsltproc unzip</span><br></pre></td></tr></table></figure><h2 id="初始化编译环境"><a href="#初始化编译环境" class="headerlink" title="初始化编译环境"></a>初始化编译环境</h2><p>进入项目目录，打开终端，输入命令：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">source build/envsetup.sh</span><br></pre></td></tr></table></figure><p>编译前删除build文件夹</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">make clobber</span><br></pre></td></tr></table></figure><h2 id="选择编译目标"><a href="#选择编译目标" class="headerlink" title="选择编译目标"></a>选择编译目标</h2><p>输入命令：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">lunch</span><br></pre></td></tr></table></figure><p>lunch命令是envsetup.sh里定义的一个命令，用来让用户选择编译目标。</p><p>输出：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line">You&#x27;re building on Linux</span><br><span class="line"></span><br><span class="line">Lunch menu... pick a combo:</span><br><span class="line">     1. aosp_arm-eng</span><br><span class="line">     2. aosp_arm64-eng</span><br><span class="line">     3. aosp_blueline-userdebug</span><br><span class="line">     4. aosp_blueline_car-userdebug</span><br><span class="line">     5. aosp_bonito-userdebug</span><br><span class="line">     6. aosp_bonito_car-userdebug</span><br><span class="line">     7. aosp_bramble-userdebug</span><br><span class="line">     8. aosp_car_arm-userdebug</span><br><span class="line">     9. aosp_car_arm64-userdebug</span><br><span class="line">     10. aosp_car_x86-userdebug</span><br><span class="line">     11. aosp_car_x86_64-userdebug</span><br><span class="line">     12. aosp_cf_arm64_auto-userdebug</span><br><span class="line">     13. aosp_cf_arm64_phone-userdebug</span><br><span class="line">     14. aosp_cf_x86_64_pc-userdebug</span><br><span class="line">     15. aosp_cf_x86_64_phone-userdebug</span><br><span class="line">     16. aosp_cf_x86_auto-userdebug</span><br><span class="line">     17. aosp_cf_x86_phone-userdebug</span><br><span class="line">     18. aosp_cf_x86_tv-userdebug</span><br><span class="line">     19. aosp_coral-userdebug</span><br><span class="line">     20. aosp_coral_car-userdebug</span><br><span class="line">     21. aosp_crosshatch-userdebug</span><br><span class="line">     22. aosp_crosshatch_car-userdebug</span><br><span class="line">     23. aosp_flame-userdebug</span><br><span class="line">     24. aosp_flame_car-userdebug</span><br><span class="line">     25. aosp_redfin-userdebug</span><br><span class="line">     26. aosp_sargo-userdebug</span><br><span class="line">     27. aosp_sunfish-userdebug</span><br><span class="line">     28. aosp_trout_arm64-userdebug</span><br><span class="line">     29. aosp_trout_x86-userdebug</span><br><span class="line">     30. aosp_x86-eng</span><br><span class="line">     31. aosp_x86_64-eng</span><br><span class="line">     32. arm_krait-eng</span><br><span class="line">     33. arm_v7_v8-eng</span><br><span class="line">     34. armv8-eng</span><br><span class="line">     35. armv8_cortex_a55-eng</span><br><span class="line">     36. armv8_kryo385-eng</span><br><span class="line">     37. beagle_x15-userdebug</span><br><span class="line">     38. beagle_x15_auto-userdebug</span><br><span class="line">     39. car_x86_64-userdebug</span><br><span class="line">     40. db845c-userdebug</span><br><span class="line">     41. fuchsia_arm64-eng</span><br><span class="line">     42. fuchsia_x86_64-eng</span><br><span class="line">     43. hikey-userdebug</span><br><span class="line">     44. hikey64_only-userdebug</span><br><span class="line">     45. hikey960-userdebug</span><br><span class="line">     46. hikey960_tv-userdebug</span><br><span class="line">     47. hikey_tv-userdebug</span><br><span class="line">     48. pixel3_mainline-userdebug</span><br><span class="line">     49. poplar-eng</span><br><span class="line">     50. poplar-user</span><br><span class="line">     51. poplar-userdebug</span><br><span class="line">     52. qemu_trusty_arm64-userdebug</span><br><span class="line">     53. silvermont-eng</span><br><span class="line">     54. uml-userdebug</span><br><span class="line">     55. yukawa-userdebug</span><br><span class="line">     56. yukawa_sei510-userdebug</span><br><span class="line"></span><br><span class="line">Which would you like? [aosp_arm-eng] </span><br><span class="line"></span><br></pre></td></tr></table></figure><p><code>lunch</code> 命令选择要构建的<a href="https://source.android.google.cn/setup/build/building#choose-a-target">目标</a>设备类型。目标是指设备组合，例如特定型号或设备类型。</p><p>其中BUILD表示编译出的镜像可以运行在什么环境，aosp代表Android开源项目，arm表示系统是运行在arm架构的处理器上。</p><p><strong>BUILDTYPE 则指的是编译类型，通常有三种:</strong></p><ul><li>user：用来正式发布到市场的版本，权限受限，如没有 root 权限，不能 dedug 等。</li><li>userdebug：在user版本的基础上开放了 root 权限和 debug 权限。</li><li>eng：代表 engineer，开发工程师的版本，拥有最大的权限(root等)，具有额外调试工具的开发配置。</li></ul><p>如果没有谷歌手机设备，可以选择 arm 或者 x86，我选择了 <strong>aosp_x86_64-eng</strong>，编译完后运行模拟器看看，因此这里选择序号 <strong>31</strong>。</p><h2 id="开始编译"><a href="#开始编译" class="headerlink" title="开始编译"></a>开始编译</h2><p>通过 make 指令进行代码编译：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">make -j6  #建议不要大于等于电脑核数，否则出现内存不足，编译失败（切身体会）</span><br></pre></td></tr></table></figure><p>其中 -j N 参数表示处理并行任务，通常使用的任务数 N 介于编译时所用计算机上硬件线程数的 1-2 倍之间。</p><p>查看计算机上的核心数：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">brooks@MiPro:~/work/aosp$ cat /proc/cpuinfo | grep processor</span><br><span class="line">processor: 0</span><br><span class="line">processor: 1</span><br><span class="line">processor: 2</span><br><span class="line">processor: 3</span><br><span class="line">processor: 4</span><br><span class="line">processor: 5</span><br><span class="line">processor: 6</span><br><span class="line">processor: 7</span><br></pre></td></tr></table></figure><p>开始编译输出：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">brooks@brooks-Mi-Pro:~/aosp$ make -j6</span><br><span class="line">09:47:02 ************************************************************</span><br><span class="line">09:47:02 You are building on a machine with 15.5GB of RAM</span><br><span class="line">09:47:02 </span><br><span class="line">09:47:02 The minimum required amount of free memory is around 16GB,</span><br><span class="line">09:47:02 and even with that, some configurations may not work.</span><br><span class="line">09:47:02 </span><br><span class="line">09:47:02 If you run into segfaults or other errors, try reducing your</span><br><span class="line">09:47:02 -j value.</span><br><span class="line">09:47:02 ************************************************************</span><br><span class="line">build/make/core/soong_config.mk:195: warning: BOARD_PLAT_PUBLIC_SEPOLICY_DIR has been deprecated. Us</span><br><span class="line">e SYSTEM_EXT_PUBLIC_SEPOLICY_DIRS instead.</span><br><span class="line">build/make/core/soong_config.mk:196: warning: BOARD_PLAT_PRIVATE_SEPOLICY_DIR has been deprecated. U</span><br><span class="line">se SYSTEM_EXT_PRIVATE_SEPOLICY_DIRS instead.</span><br><span class="line">============================================</span><br><span class="line">PLATFORM_VERSION_CODENAME=T</span><br><span class="line">PLATFORM_VERSION=T</span><br><span class="line">TARGET_PRODUCT=aosp_x86_64</span><br><span class="line">TARGET_BUILD_VARIANT=eng</span><br><span class="line">TARGET_BUILD_TYPE=release</span><br><span class="line">TARGET_ARCH=x86_64</span><br><span class="line">TARGET_ARCH_VARIANT=x86_64</span><br><span class="line">TARGET_2ND_ARCH=x86</span><br><span class="line">TARGET_2ND_ARCH_VARIANT=x86_64</span><br><span class="line">HOST_ARCH=x86_64</span><br><span class="line">HOST_2ND_ARCH=x86</span><br><span class="line">HOST_OS=linux</span><br><span class="line">HOST_OS_EXTRA=Linux-5.8.0-59-generic-x86_64-Ubuntu-20.04.2-LTS</span><br><span class="line">HOST_CROSS_OS=windows</span><br><span class="line">HOST_CROSS_ARCH=x86</span><br><span class="line">HOST_CROSS_2ND_ARCH=x86_64</span><br><span class="line">HOST_BUILD_TYPE=release</span><br><span class="line">BUILD_ID=AOSP.MASTER</span><br><span class="line">OUT_DIR=out</span><br><span class="line"></span><br><span class="line">PRODUCT_SOONG_NAMESPACES=device/generic/goldfish device/generic/goldfish-opengl hardware/google/camera hardware/google/camera/devices/EmulatedCamera</span><br><span class="line">============================================</span><br></pre></td></tr></table></figure><p><strong>编译错误参考</strong>：<a href="https://www.jianshu.com/p/8ec0f1f1863a">https://www.jianshu.com/p/8ec0f1f1863a</a></p><h2 id="编译成功-大概花费时长：5h"><a href="#编译成功-大概花费时长：5h" class="headerlink" title="编译成功-大概花费时长：5h"></a>编译成功-大概花费时长：5h</h2><p>第一次编译比较慢，大概5小时左右，编译n次才通过</p><p><img src="/2021/07/16/Android-AOSP%EF%BC%88%E4%BA%8C%EF%BC%89%E6%BA%90%E7%A0%81%E7%BC%96%E8%AF%91/image-20210804103058313.png" alt="image-20210804103058313"></p><h2 id="运行模拟器"><a href="#运行模拟器" class="headerlink" title="运行模拟器"></a>运行模拟器</h2><p>在编译完成之后,就可以通过以下命令运行Android虚拟机了，命令如下:</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">source build/envsetup.sh</span><br><span class="line">lunch 31</span><br><span class="line">emulator  #如果编译后运行，直接使用此命令</span><br></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">emulator: WARNING: Couldn&#x27;t find crash service executable /home/brooks/aosp-resource/aosp/prebuilts/android-emulator/linux-x86_64/emulator64-crash-service</span><br><span class="line">emulator: WARNING: system partition size adjusted to match image file (2562 MB &gt; 800 MB)</span><br><span class="line">Your emulator is out of date, please update by launching Android Studio:</span><br><span class="line"> - Start Android Studio</span><br><span class="line"> - Select menu &quot;Tools &gt; Android &gt; SDK Manager&quot;</span><br><span class="line"> - Click &quot;SDK Tools&quot; tab</span><br><span class="line"> - Check &quot;Android Emulator&quot; checkbox</span><br><span class="line"> - Click &quot;OK&quot;</span><br><span class="line"></span><br><span class="line">emulator: INFO: boot completed</span><br></pre></td></tr></table></figure><p><img src="/2021/07/16/Android-AOSP%EF%BC%88%E4%BA%8C%EF%BC%89%E6%BA%90%E7%A0%81%E7%BC%96%E8%AF%91/image-20210804102211546.png" alt="image-20210804102211546"></p><p><strong>注：</strong>模拟器一直运行失败，各种错误解决不了。建议从官网下载aosp，然后重新编译。</p><p>模拟器运行需要四个文件，分别是：</p><ul><li>Linux Kernel</li><li>system.img</li><li>userdata.img</li><li>ramdisk.img</li></ul><p>上面我 lunch 命令时选择的是 aosp_x86_64-eng，因此 linux 默认使用的 AOSP/prebuilds/qemu-kernel/x86_64/kernel-qemu 下的 kernel-qemu，而其他文件则是使用的 AOSP/out/target/product/generic_x86 目录下的 system.img、userdata.img、ramdisk.img</p><p><strong>感谢：</strong></p><p><a href="http://wuxiaolong.me/2018/07/25/AOSP2/">http://wuxiaolong.me/2018/07/25/AOSP2/</a><br><a href="https://source.android.com/setup/build/building">https://source.android.com/setup/build/building</a><br><a href="http://liuwangshu.cn/framework/aosp/3-compiling-aosp.html">http://liuwangshu.cn/framework/aosp/3-compiling-aosp.html</a></p>]]></content>
      
      
      <categories>
          
          <category> AOSP </category>
          
      </categories>
      
      
        <tags>
            
            <tag> AOSP </tag>
            
            <tag> Android </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Android AOSP（一）源码和内核源码下载</title>
      <link href="/2021/07/16/Android%20AOSP%EF%BC%88%E4%B8%80%EF%BC%89%E6%BA%90%E7%A0%81%E5%92%8C%E5%86%85%E6%A0%B8%E6%BA%90%E7%A0%81%E4%B8%8B%E8%BD%BD/"/>
      <url>/2021/07/16/Android%20AOSP%EF%BC%88%E4%B8%80%EF%BC%89%E6%BA%90%E7%A0%81%E5%92%8C%E5%86%85%E6%A0%B8%E6%BA%90%E7%A0%81%E4%B8%8B%E8%BD%BD/</url>
      
        <content type="html"><![CDATA[<p>AOSP(Android Open Source Project) 代码库可为您提供所需信息和源代码，供您创建定制的 Android 操作系统版本，将设备和配件移植到 Android 平台。官网：<a href="https://source.android.google.cn/">https://source.android.google.cn/</a></p><h1 id="下载repo"><a href="#下载repo" class="headerlink" title="下载repo"></a>下载repo</h1><p><a href="https://gerrit.googlesource.com/git-repo/+/refs/heads/master/README.md">Repo</a> Google开发的一个工具，整合多个 Git 代码库，自动执行 Android 开发工作流程的部分环节。不会取代 Git，只是为了让您在 Android 环境中更轻松地使用 Git。</p><span id="more"></span><p>ubuntu输入命令：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install git  </span><br></pre></td></tr></table></figure><p>配置环境变量:</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mkdir ~/bin</span><br><span class="line">PATH=~/bin:$PATH</span><br></pre></td></tr></table></figure><p>安装curl：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install curl</span><br></pre></td></tr></table></figure><p>下载repo并设置权限：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">curl https://mirrors.tuna.tsinghua.edu.cn/git/git-repo &gt; ~/bin/repo</span><br><span class="line">chmod a+x ~/bin/repo</span><br></pre></td></tr></table></figure><p>安装python:</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install python</span><br></pre></td></tr></table></figure><h1 id="下载源码"><a href="#下载源码" class="headerlink" title="下载源码"></a>下载源码</h1><h2 id="下载源码《方法一》"><a href="#下载源码《方法一》" class="headerlink" title="下载源码《方法一》"></a>下载源码《方法一》</h2><p>建立工作目录:</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mkdir aosp</span><br><span class="line">cd aosp</span><br></pre></td></tr></table></figure><p>初始化仓库:</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">repo init -u https://aosp.tuna.tsinghua.edu.cn/platform/manifest</span><br></pre></td></tr></table></figure><p>初始化并指定版本:</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">repo init -u https://aosp.tuna.tsinghua.edu.cn/platform/manifest -b android-8.0.0_r15</span><br></pre></td></tr></table></figure><p>同步源码树：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">repo sync</span><br></pre></td></tr></table></figure><p>然后等待下载完毕,大概源码大小为 65G</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">brooks@brooks-MiPro:~/aosp$ du -sh</span><br><span class="line">65G</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash">我下载了N次，每次都会有小部分文件失败，然后编译，最终编译成功，但是模拟器跑步起来</span></span><br></pre></td></tr></table></figure><h2 id="下载源码《方法二》"><a href="#下载源码《方法二》" class="headerlink" title="下载源码《方法二》"></a>下载源码《方法二》</h2><p>方法一，任何网络故障大概率出现部分文件下载失败，强烈建议使用方法二。大概124G</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">wget -c https://mirrors.tuna.tsinghua.edu.cn/aosp-monthly/aosp-latest.tar # 下载初始化包</span><br><span class="line">tar xf aosp-latest.tar</span><br><span class="line">cd AOSP   # 解压得到的 AOSP 工程目录，此时只有一个隐藏的 .repo 目录</span><br><span class="line">repo sync # 正常同步一遍即可得到完整目录 或 repo sync -l 仅checkout代码</span><br></pre></td></tr></table></figure><p>此后，每次只需运行 <code>repo sync</code> 即可保持同步。 <strong>我们强烈建议您保持每天同步，并尽量选择凌晨等低峰时间</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">aosp-latest.tar                        100%[++++++++++===========================================================&gt;] 123.57G  3.27MB/s    用时 9h 9m s</span><br><span class="line"></span><br><span class="line">2021-07-23 08:40:22 (3.31 MB/s) - 已保存 “aosp-latest.tar” [132684083200/132684083200])</span><br></pre></td></tr></table></figure><h1 id="下载内核源码"><a href="#下载内核源码" class="headerlink" title="下载内核源码"></a>下载内核源码</h1><p>AOSP源码中并不包括内核源码，需要单独下载，内核源码有很多版本，比如common是通用的Linux内核，msm是用于使用高通MSM芯片的Android设备，goldfish是用于Android模拟器的内核源码，这里以goldfish为例。</p><p>建立工作目录：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mkdir kernel</span><br><span class="line">cd kernel</span><br></pre></td></tr></table></figure><p>使用清华的镜像：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git clone https://aosp.tuna.tsinghua.edu.cn/kernel/goldfish.git</span><br></pre></td></tr></table></figure><p><strong>注：</strong>大概率git下载失败，文件过大。网上搜增加git缓存-依然无效，后来想到国内gitee，借助它完美下载，速度超快。</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">完美解决-下载速度快</span></span><br><span class="line">git clone https://gitee.com/gnosz/goldfish.git </span><br><span class="line"></span><br><span class="line">正克隆到 &#x27;goldfish&#x27;...</span><br><span class="line">remote: Enumerating objects: 6038180, done.</span><br><span class="line">remote: Counting objects: 100% (6038180/6038180), done.</span><br><span class="line">remote: Compressing objects: 100% (916276/916276), done.</span><br><span class="line">remote: Total 6038180 (delta 5082037), reused 6034994 (delta 5079268), pack-reused 0</span><br><span class="line">接收对象中: 100% (6038180/6038180), 1.29 GiB | 3.37 MiB/s, 完成.</span><br><span class="line">处理 delta 中: 100% (5082037/5082037), 完成.</span><br></pre></td></tr></table></figure><p>这时kernel目录中会生成一个goldfish文件夹，进入后使用git命令查看有哪些内核版本分支可以下载：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">cd goldfish</span><br><span class="line"></span><br><span class="line">brooks@MiPro:~/kernel/goldfish$ git branch -a</span><br><span class="line">* master</span><br><span class="line">  remotes/origin/HEAD -&gt; origin/master</span><br><span class="line">  remotes/origin/android-3.10</span><br><span class="line">  remotes/origin/android-3.18</span><br><span class="line">  remotes/origin/android-3.4</span><br><span class="line">  remotes/origin/android-4.14</span><br><span class="line">  remotes/origin/android-4.4</span><br><span class="line">  remotes/origin/android-goldfish-2.6.29</span><br><span class="line">  remotes/origin/android-goldfish-3.10</span><br><span class="line">  remotes/origin/android-goldfish-3.10-k-dev</span><br><span class="line">  remotes/origin/android-goldfish-3.10-l-mr1-dev</span><br><span class="line">  remotes/origin/android-goldfish-3.10-m-dev</span><br><span class="line">  remotes/origin/android-goldfish-3.10-n-dev</span><br><span class="line">  remotes/origin/android-goldfish-3.18</span><br><span class="line">  remotes/origin/android-goldfish-3.18-dev</span><br><span class="line">  remotes/origin/android-goldfish-3.4</span><br><span class="line">  remotes/origin/android-goldfish-3.4-l-mr1-dev</span><br><span class="line">  remotes/origin/android-goldfish-4.14-dev</span><br><span class="line">  remotes/origin/android-goldfish-4.14-dev.120914098</span><br><span class="line">  remotes/origin/android-goldfish-4.14-dev.20190417</span><br><span class="line">  remotes/origin/android-goldfish-4.14-dev.backup</span><br><span class="line">  remotes/origin/android-goldfish-4.4-dev</span><br><span class="line">  remotes/origin/android-goldfish-4.9-dev</span><br><span class="line">  remotes/origin/b12</span><br><span class="line">  remotes/origin/b120914098</span><br><span class="line">  remotes/origin/heads/for/android-goldfish-3.18-dev</span><br><span class="line">  remotes/origin/linux-goldfish-3.0-wip</span><br><span class="line">  remotes/origin/master</span><br><span class="line">  remotes/origin/test</span><br><span class="line">  remotes/origin/tparker-recovery</span><br></pre></td></tr></table></figure><p>这里选择下载goldfish 3.4版本</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">git checkout remotes/origin/android-goldfish-3.4</span><br><span class="line"></span><br><span class="line">git switch -c origin/android-goldfish-3.4</span><br></pre></td></tr></table></figure><p><strong>感谢：</strong></p><p><a href="http://liuwangshu.cn/framework/aosp/2-download-aosp.html">http://liuwangshu.cn/framework/aosp/2-download-aosp.html</a><br><a href="https://source.android.google.cn/setup/start">https://source.android.google.cn/setup/start</a></p>]]></content>
      
      
      <categories>
          
          <category> AOSP </category>
          
      </categories>
      
      
        <tags>
            
            <tag> AOSP </tag>
            
            <tag> Android </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Hexo入门指南</title>
      <link href="/2021/07/15/Hexo%E5%85%A5%E9%97%A8%E6%8C%87%E5%8D%97/"/>
      <url>/2021/07/15/Hexo%E5%85%A5%E9%97%A8%E6%8C%87%E5%8D%97/</url>
      
        <content type="html"><![CDATA[<h1 id="文章"><a href="#文章" class="headerlink" title="文章"></a>文章</h1><h2 id="创建文章"><a href="#创建文章" class="headerlink" title="创建文章"></a>创建文章</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo n &quot;文章名字&quot;</span><br></pre></td></tr></table></figure><p>生成后提示文件路径：INFO  Created: ~/文档/Blog/source/_posts/Hexo使用.md</p><span id="more"></span> <h2 id="基本设置"><a href="#基本设置" class="headerlink" title="基本设置"></a>基本设置</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">---</span><br><span class="line">title: Hexo使用 </span><br><span class="line">date: 2021-07-15 14:34:51</span><br><span class="line">comments: true #是否可评论</span><br><span class="line">toc: true   #是否显示文章目录</span><br><span class="line">categories: &quot;Android&quot; #分类</span><br><span class="line">tags:   #标签</span><br><span class="line">- Android</span><br><span class="line">- Git</span><br><span class="line">---</span><br></pre></td></tr></table></figure><h2 id="设置摘要"><a href="#设置摘要" class="headerlink" title="设置摘要"></a>设置摘要</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">添加： &lt;!--more--&gt; 之上的内容为摘要。</span><br></pre></td></tr></table></figure><h2 id="创建草稿"><a href="#创建草稿" class="headerlink" title="创建草稿"></a>创建草稿</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo n draft &quot;草稿名字&quot;</span><br></pre></td></tr></table></figure><p>生成后提示文件路径：INFO  Created: ~/文档/Blog/source/_drafts/草稿名字.md</p><h2 id="草稿转文章"><a href="#草稿转文章" class="headerlink" title="草稿转文章"></a>草稿转文章</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo publish &quot;草稿名字&quot;</span><br></pre></td></tr></table></figure><p>执行后提示：INFO  Published: ~/文档/Blog/source/_posts/草稿名字.md</p><h2 id="删除文章"><a href="#删除文章" class="headerlink" title="删除文章"></a>删除文章</h2><p>暂未提供命令，进入source/_posts/下删除对应的文章md， 然后执行部署。</p><h1 id="部署"><a href="#部署" class="headerlink" title="部署"></a>部署</h1><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">hexo clean #清楚缓存</span><br><span class="line">hexo g #生成静态文件</span><br><span class="line">hexo d #部署到服务端</span><br></pre></td></tr></table></figure><h1 id="服务"><a href="#服务" class="headerlink" title="服务"></a>服务</h1><h2 id="启动本地hexo服务"><a href="#启动本地hexo服务" class="headerlink" title="启动本地hexo服务"></a>启动本地hexo服务</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo s</span><br></pre></td></tr></table></figure><h2 id="关闭服务"><a href="#关闭服务" class="headerlink" title="关闭服务"></a>关闭服务</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ctrl + c</span><br></pre></td></tr></table></figure><h1 id="查看"><a href="#查看" class="headerlink" title="查看"></a>查看</h1><h2 id="查看所有文章"><a href="#查看所有文章" class="headerlink" title="查看所有文章"></a>查看所有文章</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">hexo list post</span><br><span class="line"></span><br><span class="line">brooks@brooks-Mi-Pro:~/文档/Blog$ hexo list post</span><br><span class="line">INFO  Validating config</span><br><span class="line">INFO  Start processing</span><br><span class="line">Date        Title                                 Path                                  Category  Tags</span><br><span class="line">2021-07-14  第一篇《个人博客搭建》               _posts/个人博客搭建.md                         杂谈    Blog</span><br><span class="line">2021-07-18  Git 常用命令                       _posts/Git-常用命令.md                        Git     Git</span><br><span class="line">2021-07-18  Hexo入门指南                       _posts/Hexo入门指南.md                        Hexo    Hexo</span><br><span class="line">Draft       Android ADB 常用命令               _drafts/Android-ADB-常用命令.md</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Hexo </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Hexo </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>第一篇《个人博客搭建》</title>
      <link href="/2021/07/14/%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA/"/>
      <url>/2021/07/14/%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA/</url>
      
        <content type="html"><![CDATA[<p>很久之前就想搞个 《个人博客》，直到今天才实现了，感谢大佬的教程，强推给大家。再次表示感谢！</p><p>搭建个人博客教程：<a href="https://zhuanlan.zhihu.com/p/102592286?tdsourcetag=s_pctim_aiomsg">https://zhuanlan.zhihu.com/p/102592286?tdsourcetag=s_pctim_aiomsg</a></p><p>就像作者所说，唯一需要的就是<strong>耐心、坚持</strong>！ 当你有足够的耐心和动力，仿佛一切都在帮你。成功后的喜悦，希望大家去切身体会。</p><p><img src="/2021/07/14/%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA/img_car.jpeg"></p><p>贴上一个男人都喜欢的车！</p>]]></content>
      
      
      <categories>
          
          <category> 杂谈 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Blog </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
